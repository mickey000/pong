{"version":3,"sources":["constants/actions.js","actions/playground.js","actions/leftPlayer.js","actions/rightPlayer.js","components/Stick.react.js","components/Ball.react.js","constants/keysMap.js","constants/directions.js","components/Playground.react.js","components/App.react.js","utils/getNewPosition.js","middlewares/sagas/index.js","reducers/ball.js","store.js","reducers/leftPlayer.js","reducers/rightPlayer.js","reducers/index.js","index.js"],"names":["UPDATE_POSITIONS","SET_RIGHT_POSITION","SET_LEFT_POSITION","playground","updatePositions","type","actions_leftPlayer","setLeftMove","moveY","actions_rightPlayer","setRightMove","Stick","_ref","_this$props","this","props","side","position","Object","defineProperty","getPosition","react_default","a","createElement","className","style","Component","Ball","_this$props$position","left","x","bottom","y","keysMap","UP","DOWN","W","S","P","R","SPACE","directions","LEFT","RIGHT","ZERO","Playground","shouldUpdatePositions","_this","updatePositionsInterval","clearInterval","setInterval","handleKeyDown","e","keyCode","key","preventDefault","handleKeyUp","window","addEventListener","removeEventListener","leftPosition","rightPosition","ballPosition","Stick_react","Ball_react","connect","state","leftPlayer","rightPlayer","ball","moveX","dispatch","bindActionCreators","objectSpread","playgroundActions","leftPlayerActions","rightPlayerActions","App","Playground_react","getNewPlayerPosition","move","newPosition","updatePositionsFunc","gamePaused","leftPlayerPosition","leftPlayerMove","rightPlayerPosition","rightPlayerMove","newLeftPlayerPosition","newRightPlayerPosition","regenerator_default","wrap","_context","prev","next","select","sent","abrupt","all","put","stop","_marked","_context2","takeEvery","_marked2","composeEnhancers","saga","store","initState","ballReducer","arguments","length","undefined","action","_action$move","leftPlayerReducer","rightPlayerReducer","pongGame","combineReducers","src_store","compose","createSagaMiddleware","createStore","applyMiddleware","apply","run","sagaMiddleware","ReactDOM","render","es","App_react","document","getElementById"],"mappings":"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","file":"static/js/main.9d4ddb2e.chunk.js","sourcesContent":["const UPDATE_POSITIONS = 'updatePositions';\n\nconst SET_RIGHT_MOVE = 'setRightMove';\nconst SET_RIGHT_POSITION = 'setRightPosition';\n\nconst SET_LEFT_MOVE = 'setLeftMove';\nconst SET_LEFT_POSITION = 'setLeftPosition';\n\nexport {\n    UPDATE_POSITIONS,\n\n    SET_RIGHT_MOVE,\n    SET_RIGHT_POSITION,\n\n    SET_LEFT_MOVE,\n    SET_LEFT_POSITION\n};","import { UPDATE_POSITIONS } from 'constants/actions';\n\nexport default {\n    updatePositions: () => ({ type: UPDATE_POSITIONS })\n}","import { SET_LEFT_MOVE } from 'constants/actions';\n\nexport default {\n    setLeftMove: moveY => ({ type: SET_LEFT_MOVE, moveY})\n}","import { SET_RIGHT_MOVE } from 'constants/actions';\n\nexport default {\n    setRightMove: moveY => ({ type: SET_RIGHT_MOVE, moveY })\n}","import React, { Component } from 'react';\n\nclass Stick extends Component {\n\n    getPosition() {\n        const { side, position } = this.props;\n\n        return {\n            [side]: 0,\n            bottom: position\n        };\n    }\n\n    render() {\n        const position = this.getPosition();\n\n        return (\n            <div className=\"stick\" style={position}/>\n        );\n    }\n}\n\nexport default Stick;\n","import React, { Component } from 'react';\n\nclass Ball extends Component {\n\n    getPosition() {\n        const { position: { x, y } } = this.props;\n\n        return {\n            left: x,\n            bottom: y\n        };\n    }\n\n    render() {\n        const position = this.getPosition();\n\n        return (\n            <div className=\"ball\" style={position}/>\n        );\n    }\n}\n\nexport default Ball;\n","export default {\n    UP: 38,\n    DOWN: 40,\n    W: 87,\n    S: 83,\n    P: 80,\n    R: 82,\n    SPACE: 32\n};","export default {\n    UP: 1,\n    DOWN: -1,\n    LEFT: -1,\n    RIGHT: 1,\n    ZERO: 0\n};","import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport playgroundActions from 'actions/playground';\nimport leftPlayerActions from 'actions/leftPlayer';\nimport rightPlayerActions from 'actions/rightPlayer';\nimport Stick from 'components/Stick.react';\nimport Ball from 'components/Ball.react';\nimport key from 'constants/keysMap';\nimport directions from 'constants/directions';\n\nclass Playground extends Component {\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.handleKeyDown)\n        window.addEventListener('keyup', this.handleKeyUp)\n\n        this.updatePositions();\n    }\n     \n    componentWillUnmount() {\n        window.removeEventListener('keydown', this.handleKeyDown)\n        window.removeEventListener('keyup', this.handleKeyUp)\n    }\n\n    componentDidUpdate() {\n        this.updatePositions();        \n    }\n\n    updatePositions = () => {\n        const { shouldUpdatePositions } = this.props;\n\n        if (!shouldUpdatePositions && this.updatePositionsInterval) {\n            clearInterval(this.updatePositionsInterval);\n            delete this.updatePositionsInterval;\n\n            return;\n        }\n            \n        if (shouldUpdatePositions && !this.updatePositionsInterval)\n            this.updatePositionsInterval = setInterval(this.props.updatePositions, 1000/60);\n\n    }\n\n    handleKeyDown = (e) => {\n        switch(e.keyCode) {\n            case key.W:\n                e.preventDefault();\n                this.props.setLeftMove(directions.UP);\n                return;\n            case key.S:\n                e.preventDefault();\n                this.props.setLeftMove(directions.DOWN);\n                return;\n            case key.UP:\n                e.preventDefault();\n                this.props.setRightMove(directions.UP);\n                return;\n            case key.DOWN:\n                e.preventDefault();\n                this.props.setRightMove(directions.DOWN);\n                return;\n            default:\n                return;\n        }\n    }\n\n    handleKeyUp = (e) => {\n        switch(e.keyCode) {\n            case key.W:\n            case key.S:\n                e.preventDefault();\n                this.props.setLeftMove(directions.ZERO);\n                return;\n            case key.UP:\n            case key.DOWN:\n                e.preventDefault();\n                this.props.setRightMove(directions.ZERO);\n                return;\n            default:\n                return;\n        }\n    }\n\n    render() {\n        const { leftPosition, rightPosition, ballPosition } = this.props;\n\n        return (\n            <div className='playground'>\n                <Stick side='left' position={leftPosition} />\n                <Stick side='right' position={rightPosition} />\n                <Ball position={ballPosition} />\n            </div>\n        );\n    }\n}\n\nexport default connect(\n    state => {\n        const { leftPlayer, rightPlayer, ball } = state;\n\n        return {\n            leftPosition: leftPlayer.position,\n            rightPosition: rightPlayer.position,\n            ballPosition: ball.position,\n            shouldUpdatePositions: leftPlayer.moveY || rightPlayer.moveY || ball.moveX || ball.moveY\n        };\n    },\n    dispatch => bindActionCreators({\n        ...playgroundActions,\n        ...leftPlayerActions,\n        ...rightPlayerActions\n    }, dispatch)\n)(Playground);\n","import React, { Component } from 'react';\nimport Playground from 'components/Playground.react';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <Playground />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const PLAYER_SPEED = 320/60;\nconst MAX_PLAYER_POSITION = 320;\nconst MIN_PLAYER_POSITION = 0;\n\nconst getNewPlayerPosition = (position, move) => {\n    const newPosition = position + (move * PLAYER_SPEED);\n\n    if (newPosition < MIN_PLAYER_POSITION) return MIN_PLAYER_POSITION;\n    else if (newPosition > MAX_PLAYER_POSITION) return MAX_PLAYER_POSITION;\n\n    return newPosition;\n}\n\nexport {\n    getNewPlayerPosition\n}","import { UPDATE_POSITIONS, SET_LEFT_POSITION, SET_RIGHT_POSITION } from 'constants/actions';\nimport { takeEvery, all, put, select } from 'redux-saga/effects';\nimport { getNewPlayerPosition } from 'utils/getNewPosition';\n\nfunction * updatePositionsFunc () {\n    const { gamePaused, leftPlayer, rightPlayer } = yield select();\n\n    if (gamePaused) return;\n\n    const leftPlayerPosition = leftPlayer.position;\n    const leftPlayerMove = leftPlayer.moveY;\n\n    const rightPlayerPosition = rightPlayer.position;\n    const rightPlayerMove = rightPlayer.moveY;\n\n    const newLeftPlayerPosition = getNewPlayerPosition(leftPlayerPosition, leftPlayerMove);\n    const newRightPlayerPosition = getNewPlayerPosition(rightPlayerPosition, rightPlayerMove);\n\n    yield all([\n        put({ type: SET_LEFT_POSITION, position: newLeftPlayerPosition }),\n        put({ type: SET_RIGHT_POSITION, position: newRightPlayerPosition })\n    ]);\n}\n\nexport default function* updatePositions() {\n    yield takeEvery(UPDATE_POSITIONS, updatePositionsFunc);\n}","const initState = {\n    position: {\n        x: (790 - 10) / 2,\n        y: (390 - 10) / 2\n    },\n    moveX: 0,\n    moveY: 0\n};\n\nconst ballReducer = (state = initState, action) => {\n    switch (action.type) {\n      case 'SET_BALL_MOVE':\n        const { moveX, moveY } = action.move;\n        return {\n            ...state,\n            moveX,\n            moveY\n        };\n\n    case 'SET_BALL_POSITION':\n        const { position } = action;\n        return {\n            ...state,\n            position\n        };\n\n      default:\n        return state;\n    }\n  };\n  \n  export default ballReducer;","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport sagaMiddleware from 'middlewares/sagas';\nimport pongGame from './reducers';\n\nexport default (() => {\n    const composeEnhancers = process.env.NODE_ENV === 'production'\n        ? compose\n        : window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n    const saga = createSagaMiddleware();\n\n    const store = createStore(\n        pongGame,\n        undefined,\n        composeEnhancers(\n            applyMiddleware(...[\n                    saga\n            ])\n        )\n    );\n\n    saga.run(sagaMiddleware);\n\n    return store;\n})();","import { SET_LEFT_MOVE, SET_LEFT_POSITION } from 'constants/actions';\n\nconst initState = {\n    position: (360 - 40) / 2,\n    moveY: 0\n};\n\nconst leftPlayerReducer = (state = initState, action) => {\n    switch (action.type) {\n      case SET_LEFT_MOVE:\n        const { moveY } = action;\n        return {\n            ...state,\n            moveY\n        };\n\n    case SET_LEFT_POSITION:\n        const { position } = action;\n        return {\n            ...state,\n            position\n        };\n\n      default:\n        return state;\n    }\n  };\n  \n  export default leftPlayerReducer;","import { SET_RIGHT_MOVE, SET_RIGHT_POSITION } from 'constants/actions';\n\nconst initState = {\n    position: (360 - 40) / 2,\n    moveY: 0\n};\n\nconst rightPlayerReducer = (state = initState, action) => {\n    switch (action.type) {\n      case SET_RIGHT_MOVE:\n        const { moveY } = action;\n        return {\n            ...state,\n            moveY\n        };\n\n    case SET_RIGHT_POSITION:\n        const { position } = action;\n        return {\n            ...state,\n            position\n        };\n\n      default:\n        return state;\n    }\n  };\n  \n  export default rightPlayerReducer;","import { combineReducers } from 'redux';\nimport ball from './ball';\nimport leftPlayer from './leftPlayer';\nimport rightPlayer from 'reducers/rightPlayer';\n\nconst pongGame = combineReducers({\n    ball,\n    leftPlayer,\n    rightPlayer,\n});\n\nexport default pongGame;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/App.react';\nimport store from './store';\n\nimport 'styles/index.css';\n\nReactDOM.render(\n    <Provider store={store} >\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}